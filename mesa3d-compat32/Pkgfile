# Description: Mesa 3D Graphics Library
# URL: http://www.mesa3d.org
# Maintainer: Tilman Sauerbeck, tilman at crux dot nu
# Arch Maintainer: Lucas Hazel, lucas at die dot net dot au
# Depends on: mesa3d, libdrm-compat32, xorg-glproto-compat32, xorg-xextproto-compat32, xorg-libx11-compat32, xorg-xf86vidmodeproto-compat32, xorg-libxext-compat32, xorg-libxxf86vm-compat32, xorg-libxt-compat32, xorg-libxdamage-compat32, xorg-dri2proto-compat32

name=mesa3d-compat32
version=7.4.4
release=1
source=(http://dl.sourceforge.net/mesa3d/Mesa{Lib,Demos}-$version.tar.bz2)

build() {
    cd Mesa-$version
    
    ./configure --prefix=/usr \
	--libdir=/usr/lib32 \
	--with-driver-dri=dri \
	--with-dri-driverdir=/usr/lib32/dri \
	--enable-32-bit \
	--disable-64-bit

    make
    
    make DESTDIR=$PKG install
    
    install -d $PKG/usr/bin
    install -m 755 progs/xdemos/glxgears $PKG/usr/bin/glxgears32
    install -m 755 progs/xdemos/glxinfo $PKG/usr/bin/glxinfo32

    rm -rf $PKG/usr/include
}